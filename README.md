# LuduScript

ä¸€ä¸ªä¸“ä¸ºæ¸¸æˆå¡ç‰Œç”Ÿæˆè®¾è®¡çš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ã€‚LuduScript å…è®¸æ‚¨ä½¿ç”¨ç®€æ´çš„è„šæœ¬è¯­æ³•æ¥å®šä¹‰å’Œç”Ÿæˆå„ç§ç±»å‹çš„æ¸¸æˆå¡ç‰Œï¼Œå¦‚æ‰‘å…‹ç‰Œã€ç‹¼äººæ€å¡ç‰Œç­‰ã€‚

## ç‰¹æ€§

- ğŸ¯ **ä¸“é—¨ä¸ºæ¸¸æˆå¡ç‰Œè®¾è®¡** - å†…ç½®å¯¹å¡ç‰Œå±æ€§ã€å¥—è£…ã€æ•°å€¼ç­‰æ¦‚å¿µçš„æ”¯æŒ
- ğŸ“ **ç®€æ´çš„è¯­æ³•** - æ˜“äºå­¦ä¹ å’Œä½¿ç”¨çš„è„šæœ¬è¯­è¨€
- ğŸ”„ **çµæ´»çš„è¾“å‡ºæ ¼å¼** - æ”¯æŒJSONç­‰å¤šç§è¾“å‡ºæ ¼å¼
- ğŸ² **ä¸°å¯Œçš„å†…ç½®å‡½æ•°** - æä¾›éšæœºæ•°ç”Ÿæˆã€æ•°ç»„æ“ä½œç­‰å®ç”¨åŠŸèƒ½
- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„** - æ¸…æ™°çš„è¯æ³•åˆ†æã€è¯­æ³•åˆ†æå’Œè§£é‡Šæ‰§è¡Œåˆ†ç¦»
- ğŸ”§ **è·¨å¹³å°æ”¯æŒ** - æ”¯æŒWindowsã€Linuxå’ŒmacOS

## å¿«é€Ÿå¼€å§‹

### æ„å»ºé¡¹ç›®

#### ä½¿ç”¨CMakeï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# é…ç½®é¡¹ç›®
cmake .. -DCMAKE_BUILD_TYPE=Release

# æ„å»º
cmake --build . --config Release
```

#### ä½¿ç”¨Makefile

```bash
# æ„å»ºå‘å¸ƒç‰ˆæœ¬
make release

# æˆ–è€…æ„å»ºè°ƒè¯•ç‰ˆæœ¬
make debug
```

#### ä½¿ç”¨æ„å»ºè„šæœ¬

**Windows:**

```cmd
build.bat
```

**Linux/macOS:**

```bash
chmod +x build.sh
./build.sh
```

### è¿è¡Œç¤ºä¾‹

æ„å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥è¿è¡Œé¢„ç½®çš„ç¤ºä¾‹è„šæœ¬ï¼š

```bash
# ç”Ÿæˆæ‰‘å…‹ç‰Œ
./bin/luduscript scripts/generate_poker_deck_en.gen --output output/poker_cards.json

# ç”Ÿæˆç‹¼äººæ€å¡ç‰Œ
./bin/luduscript scripts/generate_werewolf_cards.gen --output output/werewolf_cards.json
```

## é¡¹ç›®ç»“æ„

```text
LuduScript/
â”œâ”€â”€ src/                    # æºä»£ç æ–‡ä»¶
â”‚   â”œâ”€â”€ main.cpp           # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ lexer.cpp          # è¯æ³•åˆ†æå™¨
â”‚   â”œâ”€â”€ parser.cpp         # è¯­æ³•åˆ†æå™¨
â”‚   â”œâ”€â”€ parser_expr.cpp    # è¡¨è¾¾å¼è§£æ
â”‚   â”œâ”€â”€ interpreter.cpp    # è§£é‡Šå™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ interpreter_stmt.cpp # è¯­å¥æ‰§è¡Œ
â”‚   â””â”€â”€ ast.cpp            # æŠ½è±¡è¯­æ³•æ ‘
â”œâ”€â”€ include/               # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ lexer.h
â”‚   â”œâ”€â”€ parser.h
â”‚   â”œâ”€â”€ interpreter.h
â”‚   â”œâ”€â”€ ast.h
â”‚   â””â”€â”€ nlohmann/          # JSONåº“
â”œâ”€â”€ scripts/               # ç¤ºä¾‹è„šæœ¬
â”‚   â”œâ”€â”€ generate_poker_deck_en.gen
â”‚   â””â”€â”€ generate_werewolf_cards.gen
â”œâ”€â”€ examples/              # æ›´å¤šç¤ºä¾‹å’Œæµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ output/                # è¾“å‡ºæ–‡ä»¶ç›®å½•
â”œâ”€â”€ build/                 # æ„å»ºæ–‡ä»¶ï¼ˆç”Ÿæˆï¼‰
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ CMakeLists.txt         # CMakeæ„å»ºé…ç½®
â”œâ”€â”€ Makefile              # Makeæ„å»ºé…ç½®
â”œâ”€â”€ build.bat             # Windowsæ„å»ºè„šæœ¬
â”œâ”€â”€ build.sh              # Unix/Linuxæ„å»ºè„šæœ¬
â””â”€â”€ README.md             # æœ¬æ–‡ä»¶
```

## å†…ç½®å‡½æ•°

- `output(value)` - è¾“å‡ºå€¼åˆ°ç»“æœ
- `print(value)` - æ‰“å°å€¼åˆ°æ§åˆ¶å°
- `random(min, max)` - ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•°
- `shuffle(array)` - éšæœºæ‰“ä¹±æ•°ç»„
- `length(array)` - è·å–æ•°ç»„é•¿åº¦
- `push(array, value)` - å‘æ•°ç»„æ·»åŠ å…ƒç´ 
- `pop(array)` - ä»æ•°ç»„ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ 

## æ•°æ®ç±»å‹

- **æ•°å­—** - æ•´æ•°å’Œæµ®ç‚¹æ•°
- **å­—ç¬¦ä¸²** - æ–‡æœ¬æ•°æ®
- **å¸ƒå°”å€¼** - true/false
- **æ•°ç»„** - æœ‰åºå…ƒç´ é›†åˆ
- **å¯¹è±¡** - é”®å€¼å¯¹é›†åˆ
- **null** - ç©ºå€¼

## å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ç›¸åº”çš„å¤´æ–‡ä»¶ä¸­å£°æ˜æ–°åŠŸèƒ½
2. åœ¨å¯¹åº”çš„æºæ–‡ä»¶ä¸­å®ç°
3. æ›´æ–°è§£é‡Šå™¨ä»¥æ”¯æŒæ–°è¯­æ³•
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### è°ƒè¯•

ä½¿ç”¨è°ƒè¯•ç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼š

```bash
# CMakeè°ƒè¯•æ„å»º
cmake .. -DCMAKE_BUILD_TYPE=Debug
cmake --build .

# æˆ–ä½¿ç”¨Makefile
make debug
```

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ï¼å¦‚æœæ‚¨æƒ³è´¡çŒ®ä»£ç ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache 2.0 è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0

- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºæœ¬çš„è„šæœ¬è¯­è¨€åŠŸèƒ½
- æ‰‘å…‹ç‰Œå’Œç‹¼äººæ€å¡ç‰Œç”Ÿæˆç¤ºä¾‹
- è·¨å¹³å°æ„å»ºæ”¯æŒ
- æ¨¡å—åŒ–ä»£ç æ¶æ„
