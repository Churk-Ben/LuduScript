# LuduScript 语法规范

## 概念

- **变量**: 用于存储数据的容器
- **数据类型**: 变量可以存储的数据的类型, 如数值, 字符串, 布尔值
- **表达式**: 由变量, 操作符和函数调用组成的代码片段, 用于计算值. 表达式不含{}
- **语句**: 独立的代码单位, 用于执行特定的操作
- **保留函数**: 解释器内置的函数, 用于执行特定的操作, 如类型转换, 随机数生成等

## 基本数据类型

- **数值 (num)**: 支持长整型数值和双精度浮点数
- **字符串 (str)**: 双引号包围的字符串，支持转义字符 `\n`, `\t`, `\"`, `\\`
- **布尔值 (bool)**: `true` 和 `false`

## 变量声明

```lud
num(变量名) { 初始值 }    // 数值变量
str(变量名) { 初始值 }    // 字符串变量  
bool(变量名) { 初始值 }   // 布尔变量
```

如果不提供初始值，默认值为：num=0, str="", bool=false

在{}内也可以书写语句, 解释器会把最后一个定义的变量作为变量的值, 例如:

```lud
num(变量名) {
    // 语句块
    num(i) { 10 }
    num(j) { 20 }
    num(k) { i + j }
    // 最后一个定义的变量k会作为变量的值
}
```

## 对象创建

```lud
obj("类名", ID表达式) {
    // 对象属性定义
    num(属性名) { 值 }
    str(属性名) { 值 }
    bool(属性名) { 值 }
}
```

- 对象会自动添加 `class` 和 `id` 字段
- 所有创建的对象会输出到JSON数组中

## 控制流语句

### 条件语句

```lud
if(条件表达式) {
    // 语句块
}
elif(条件表达式) {
    // 语句块  
}
else {
    // 语句块
}
```

### 循环语句

```lud
for(迭代变量, 总数) {           // 从1到总数
    // 语句块
}

for(迭代变量, 起始值, 结束值) { // 从起始值到结束值
    // 语句块
}

for(迭代变量, 起始值, 结束值, 步长) {
    // 语句块
}
```

> luduScript 将不会支持无限循环 (即不会加入 while(){} 语句)

循环跳出语句

```lud
break    // 跳出当前循环
continue // 跳过当前循环的剩余语句, 进入下一次循环
```

### 表达式和操作符

### 算术操作符

- `+` (加法)
- `-` (减法)
- `*` (乘法)
- `/` (除法)
- `%` (取模)

### 比较操作符

- `==` (等于)
- `!=` (不等于)
- `<` (小于)
- `>` (大于)
- `<=` (小于等于)
- `>=` (大于等于)

### 逻辑操作符

- `&&` (逻辑与)
- `||` (逻辑或)
- `!` (逻辑非)

### 一元操作符

- `-` (负号)
- `!` (逻辑非)

## 注释

- 行注释：`// 注释内容`

## 语法特点

1. **面向对象生成**：主要用于生成JSON格式的对象数据
2. **类型安全**：支持三种基本数据类型的声明和转换
3. **作用域管理**：支持块级作用域和变量栈
4. **表达式优先级**：按标准数学运算优先级处理
5. **灵活的for循环**：支持1-3个参数的不同循环模式

## 输出格式

解释器执行后会生成JSON数组，包含所有创建的对象，每个对象都有：

- `class`: 对象类名
- `id`: 对象ID
- 其他用户定义的属性

这个语言特别适合用于游戏开发中的卡牌、道具、角色等游戏对象的批量生成和配置。
